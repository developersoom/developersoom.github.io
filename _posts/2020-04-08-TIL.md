---
layout: post
title: 200408 TIL TDD - [Udemy] React Testing with Jest and Enzyme 1

permalink: /til/:year/:month/:day/:title/
categories: [TIL (Today I Learned)]
comments: true
---

## [Udemy] React Testing with Jest and Enzyme 1

### ì„¹ì…˜ 1: Introduction to Jest, Enzyme and TDD

**dir: demo**

**TDD = write test before we write the code**

1. write a shell version of  code (ê¸°ëŠ¥ ì•ˆí•˜ëŠ” function)
2. write the test (failí•˜ëŠ” test) - red partâ†’ we want to see the test fail
3. failing test ê°€ì§€ê³  write code to pass â†’ green part 

**Why TDD ?** 

- ì²˜ìŒì—” effortê°€ ë§Žì´ ë“ ë‹¤ê³  ìƒê°í•˜ì§€ë§Œ ë‚˜ì¤‘ì— ì½”ë“œ ìˆ˜ì • í›„ì—ëŠ” effort ì—†ì´ í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ëŒë¦´ ìˆ˜ ìžˆìŒ
- ê²°êµ­ì—” ë” ë‚˜ì€ ì½”ë“œë¥¼ ì§œê²Œ ë¨ (better organized code, plan before coding, fewer bugs, great code coverage)
    - Code Coverage is a measurement of how many lines/blocks/arcs of your code are executed while the automated tests are running.

    [ì½”ë“œ ì»¤ë²„ë¦¬ì§€ 80% ë„˜ê¸´ ì°](https://brunch.co.kr/@leehosung/43)

**Jest**

`jest --watch` : rerun the test if a change is made (since the last commit)

- docs [https://jestjs.io/docs/en/getting-started](https://jestjs.io/docs/en/getting-started)
- `toBeTruthy()` it will return true  ( â†” `toBeFalsy()`)

**Enzyme (vs React DOM)** 

- creates virtual DOM for testing
- allows testing w/o a browser
- shallow rendering = render components only one level deep (render parent, but use placeholders for children)
- npm i --save-dev enzyme jest-enzyme enzyme-adapter-react-16
- docs - [https://enzymejs.github.io/enzyme/](https://enzymejs.github.io/enzyme/)

    test("renders w/o crashing", () => {
      const wrapper = shallow(<App />);
      console.log(wrapper.debug())
    });

**Types of tests**

- unit test = test one piece of code (usually one function)
- integration test = how multiple units work together
- acceptance / end-to-end(E2E) test = how a user would interact with app

**Testing Goal** 

**#1 ease maintenance tests not having to rewrite tests when you refactor**

- Testing Behavior â­•ï¸
    - set initial state - simulate button click - check displayed count to see that it was incremented by one
- Testing Implementation ðŸš«
    - set initial state - simulate button click - check to see if particular function was called

â€”> testing implementation (function name) not behavior (display update) 

**#2 easy diagnosis of failing tests** 

- difficult to diagnose test ðŸš«
    - test that after entire process - if it fails, can't find what step was the problem / it needs further investigation
- easier to diagnose â­•ï¸
    - after each user action - test expected internal state change or test that a particular function was called  (â†’ testing implementation???) â€”> **trade off && balance**

**No snapshots** 

because 1) no TDD 2) brittle 3) difficult to diagnose 4) no intent
